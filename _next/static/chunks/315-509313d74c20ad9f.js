"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{7315:function(e,t,a){a.r(t),a.d(t,{default:function(){return Je}});var n=a(5893),r=a(7294),i=a(5697),o=a.n(i),l=a(4184),s=a.n(l),c=a(9008),d=function(e){var t=e.title,a=e.description;return(0,n.jsxs)(c.default,{children:[(0,n.jsx)("title",{children:t?"".concat(t," | Fire tool"):"Fire tool"},"title"),(0,n.jsx)("meta",{name:"description",content:a||"Tool to generate fire and precipitation charts for Mongabay."},"description")]})};d.propTypes={title:o().string,description:o().string},d.defaultProps={title:null,description:null};var u,m=d,p=function(){return(0,n.jsx)("svg",{"aria-hidden":"true",style:{position:"absolute",width:0,height:0,overflow:"hidden"},version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",children:(0,n.jsxs)("defs",{children:[(0,n.jsxs)("symbol",{id:"icon-close",viewBox:"0 0 9 9",children:[(0,n.jsx)("title",{children:"Close"}),(0,n.jsx)("path",{d:"M7.41.839l1.087 1.087-7.07 7.071L.338 7.91z"}),(0,n.jsx)("path",{d:"M8.498 7.91L7.41 8.998.339 1.927 1.427.839z"})]}),(0,n.jsxs)("symbol",{id:"icon-bottom-arrow",viewBox:"0 0 15 15",children:[(0,n.jsx)("title",{children:"Bottom arrow"}),(0,n.jsx)("path",{strokeWidth:"2",d:"M3 5l4.5 5L12 5",fill:"none"})]}),(0,n.jsxs)("symbol",{id:"icon-eye",viewBox:"0 0 22 15",children:[(0,n.jsx)("title",{children:"Visible"}),(0,n.jsx)("path",{d:"M11 0C6 0 1.73 3.11 0 7.5 1.73 11.89 6 15 11 15s9.27-3.11 11-7.5C20.27 3.11 16 0 11 0zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})]}),(0,n.jsxs)("symbol",{id:"icon-slashed-eye",viewBox:"0 0 23 21",children:[(0,n.jsx)("title",{children:"Hidden"}),(0,n.jsx)("path",{d:"M22.763 9.992a18.948 18.948 0 0 0-3.133-3.619L8.367 17.637c.997.324 2.039.493 3.088.5 6.75 0 11.125-6.838 11.308-7.13a.955.955 0 0 0 0-1.015zM21.674.28a.955.955 0 0 0-1.349 0l-3.873 3.873a10.746 10.746 0 0 0-4.997-1.29C4.705 2.864.329 9.702.146 9.994a.955.955 0 0 0 0 1.015 19.027 19.027 0 0 0 4.638 4.813L2.19 18.416a.955.955 0 1 0 1.349 1.35L21.674 1.629a.955.955 0 0 0 0-1.35zM7.636 10.5a3.818 3.818 0 0 1 3.819-3.818 3.708 3.708 0 0 1 1.92.548l-5.19 5.19a3.717 3.717 0 0 1-.549-1.92z"})]}),(0,n.jsxs)("symbol",{id:"icon-opacity",viewBox:"0 0 16 16",children:[(0,n.jsx)("title",{children:"Opacity"}),(0,n.jsx)("path",{d:"M7 0v15.876A8.001 8.001 0 0 1 7 0zm5.001 1.009v13.858a7.95 7.95 0 0 1-2 .819V.19a7.95 7.95 0 0 1 2 .819zm2 1.639A7.97 7.97 0 0 1 16 7.938a7.97 7.97 0 0 1-1.999 5.29V2.648z"})]}),(0,n.jsxs)("symbol",{id:"icon-one-map",viewBox:"0 0 45 35",children:[(0,n.jsx)("title",{children:"One map"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"44",height:"34",rx:"4"})]}),(0,n.jsxs)("symbol",{id:"icon-two-maps-horizontal",viewBox:"0 0 45 35",children:[(0,n.jsx)("title",{children:"Two horizontal maps"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"44",height:"15",rx:"4"}),(0,n.jsx)("rect",{x:".5",y:"19.5",width:"44",height:"15",rx:"4"})]}),(0,n.jsxs)("symbol",{id:"icon-two-maps-vertical",viewBox:"0 0 45 35",children:[(0,n.jsx)("title",{children:"Two vertical maps"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"20",height:"34",rx:"3"}),(0,n.jsx)("rect",{x:"24.5",y:".5",width:"20",height:"34",rx:"3"})]}),(0,n.jsxs)("symbol",{id:"icon-four-maps",viewBox:"0 0 45 35",children:[(0,n.jsx)("title",{children:"Four maps"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"20",height:"15",rx:"4"}),(0,n.jsx)("rect",{x:".5",y:"19.5",width:"20",height:"15",rx:"4"}),(0,n.jsx)("rect",{x:"24.5",y:".5",width:"20",height:"15",rx:"4"}),(0,n.jsx)("rect",{x:"24.5",y:"19.5",width:"20",height:"15",rx:"4"})]}),(0,n.jsxs)("symbol",{id:"icon-animated-map",viewBox:"0 0 45 35",children:[(0,n.jsx)("title",{children:"Animated map"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"44",height:"34",rx:"4"}),(0,n.jsx)("path",{d:"M17.5 9.852v15.064l13.475-7.532L17.5 9.852z",fill:"white"})]})]})})},h=a(4155),f=function(e){var t=e.className,a=e.children;return(0,n.jsxs)("div",{className:s()("l-simple-page",t),children:[(0,n.jsx)(m,{}),(0,n.jsxs)("main",{className:"l-static-page",children:[(0,n.jsx)("div",{className:"logo",children:(0,n.jsx)("img",{src:"".concat(null!==(u=h.env.BASE_PATH)&&void 0!==u?u:"","/images/mongabay-horizontal.jpg"),alt:"Mongabay",width:135,height:20})}),a]}),(0,n.jsx)(p,{})]})};f.propTypes={className:o().string,children:o().node.isRequired},f.defaultProps={className:null};var g=f,v=a(6628),x=a(767),_=a(7158),b=a(1876);var y=function(e){var t,a,r,i=e.name,o=e.className,l=e.style,c=s()((r=o,(a=o)in(t={})?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t));return(0,n.jsx)("svg",{className:"c-icon ".concat(c),style:l,children:(0,n.jsx)("use",{xlinkHref:"#icon-".concat(i)})})};y.propTypes={name:o().string,className:o().string,style:o().shape({})},y.defaultProps={name:"",className:"",style:{}};var w=y;function j(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=function(e){var t=e.multi,a=e.expanded,r=e.className,i=e.onChange,o=e.children;return(0,n.jsx)(b.UQ,{allowMultipleExpanded:t,allowZeroExpanded:!0,preExpanded:a,className:["c-accordion"].concat(j(r?[r]:[])).join(" "),onChange:i,children:o})};C.propTypes={multi:o().bool,expanded:o().arrayOf(o().string),className:o().string,onChange:o().func,children:o().node.isRequired},C.defaultProps={multi:!0,expanded:void 0,className:void 0,onChange:void 0};var k=function(e){var t=e.id,a=e.className,r=e.children;return(0,n.jsx)(b.Qd,{uuid:t,className:["item"].concat(j(a?[a]:[])).join(" "),children:r})};k.propTypes={id:o().string.isRequired,className:o().string,children:o().node.isRequired},k.defaultProps={className:null};var N=function(e){var t=e["aria-level"],a=e.children;return(0,n.jsx)(b.Ol,{"aria-level":t,className:"title",children:(0,n.jsxs)(b.on,{className:"button",children:[a,(0,n.jsx)(w,{name:"bottom-arrow"})]})})};N.propTypes={"aria-level":o().number.isRequired,children:o().node.isRequired};var O=function(e){var t=e.children;return(0,n.jsx)(b.Mt,{className:"panel",children:t})};O.propTypes={children:o().node.isRequired};var S=a(1736);function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){P(e,t,a[t])}))}return e}var A=function(e){var t=E({interactive:!0,placement:"top",popperOptions:{modifiers:{flip:{enabled:!1}}},trigger:"click",arrow:!0,theme:"light"},e),a=t.children;return(0,n.jsx)(S.ZP,E({},t,{children:a}))};A.propTypes={children:o().element.isRequired};var R=A,T=a(369),q=R,D=a(8520),M=a.n(D),V=a(3279),z=a.n(V),F=function(){return(0,v.I0)()},L=v.v9;function I(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,r)}function B(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){I(i,n,r,o,l,"next",e)}function l(e){I(i,n,r,o,l,"throw",e)}o(void 0)}))}}var W=B(M().mark((function e(){var t,n,r,i,o;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(443).then(a.t.bind(a,1120,23));case 2:return t=e.sent.default,e.next=5,t(document.querySelector(".js-visualization"),{scale:2});case 5:return n=e.sent,r=n.getContext("2d"),i=r.getImageData(0,0,n.width,n.height),(o=document.createElement("canvas")).width=n.width,o.height=n.height,o.getContext("2d").putImageData(i,0,0),n.width=n.width/2,n.height=n.height/2,r.scale(.5,.5),r.drawImage(o,0,0),e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)}))),H=B(M().mark((function e(){var t,a,n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:t=e.sent,a=t.toDataURL(),(n=document.createElement("a")).setAttribute("download","map.png"),n.setAttribute("href",a),n.click();case 8:case"end":return e.stop()}}),e)})));function U(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,r)}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t,a=L(x.$S.selectWidth),i=L(x.$S.selectHeight),o=L(x.$S.selectExporting),l=F(),c=(0,r.useState)({width:{value:a,isValid:!0},height:{value:i,isValid:!0}}),d=c[0],u=c[1],m=(0,r.useRef)(o),p=(0,r.useMemo)((function(){return z()((function(e){return l(x.HY.updateSettings(e))}),500)}),[l]),h=(0,r.useCallback)((function(e){var t=e.target.name,a=e.target.checkValidity(),n=a?+e.target.value:e.target.value;u((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Y(e,t,a[t])}))}return e}({},e,Y({},t,{value:n,isValid:a}))})),a&&p(Y({},t,n))}),[u,p]),f=(0,r.useCallback)((function(e){e.preventDefault(),l(x.HY.updateExporting(!0))}),[l]),g=(0,r.useCallback)((t=M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:l(x.HY.updateExporting(!1));case 3:case"end":return e.stop()}}),e)})),function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function o(e){U(i,n,r,o,l,"next",e)}function l(e){U(i,n,r,o,l,"throw",e)}o(void 0)}))}),[l]);return(0,r.useEffect)((function(){!m.current&&o&&g(),m.current=o}),[o,g]),(0,n.jsx)("div",{className:"c-export-tooltip",children:(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("legend",{children:"Chart size"}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group col-6",children:[(0,n.jsx)("label",{htmlFor:"export-width",children:"Width"}),(0,n.jsx)("input",{type:"number",id:"export-width",name:"width",className:s()({"form-control":!0,"is-invalid":!d.width.isValid}),pattern:"\\d+",value:d.width.value,min:"400",onChange:h}),(0,n.jsxs)("div",{className:"invalid-feedback",children:[0===d.width.value.length&&"Must be a number.",d.width.value.length>0&&"Minimum value: 400."]})]}),(0,n.jsxs)("div",{className:"form-group col-6",children:[(0,n.jsx)("label",{htmlFor:"export-height",children:"Height"}),(0,n.jsx)("input",{type:"number",id:"export-height",name:"height",className:s()({"form-control":!0,"is-invalid":!d.height.isValid}),pattern:"\\d+",min:"400",value:d.height.value,onChange:h}),(0,n.jsxs)("div",{className:"invalid-feedback",children:[0===d.height.value.length&&"Must be a number.",d.height.value.length>0&&"Minimum value: 400."]})]})]})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-3",disabled:!d.width.isValid||!d.height.isValid,children:"Download"})]})})},G=a(8767);function Q(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,r)}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Z=function(){var e,t=(0,G.useQuery)("country-list",(e=M().mark((function e(){var t,a,n,r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.resourcewatch.org/v1","/dataset/Political-boundaries-GADM-36")).then((function(e){return e.json()}));case 2:return t=e.sent,a=t.data.attributes,n=new URL(a.connectorUrl).origin,r=a.tableName,e.next=8,fetch("".concat(n,"/api/v2/sql?q=WITH+c+AS+(SELECT+iso%2C+name_0+FROM+").concat(r,"+WHERE+ST_Contains(ST_MakeEnvelope('-180'%2C+'-50.5'%2C+180%2C+50.5%2C+4326)%2C+the_geom))%2C+i+AS+(SELECT+iso%2C+name_0+FROM+").concat(r,"+WHERE+ST_Intersects(ST_MakeEnvelope('-180'%2C+'-50.5'%2C+180%2C+50.5%2C+4326)%2C+the_geom))+SELECT+i.iso%2C+i.name_0+AS+name%2C+c.name_0+IS+NULL+as+partial_data+FROM+c+FULL+OUTER+JOIN+i+ON+c.name_0+%3D+i.name_0 ORDER BY name ASC")).then((function(e){return e.json()})).then((function(e){return e.rows}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){Q(i,n,r,o,l,"next",e)}function l(e){Q(i,n,r,o,l,"throw",e)}o(void 0)}))}));return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){J(e,t,a[t])}))}return e}({},t,{data:t.data})};function K(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var X=function(e,t,a,n){var r;return K((null===n||void 0===n?void 0:n.placeholder)?[{label:n.placeholder,value:"",disabled:!0}]:[]).concat(K(null!==(r=null===n||void 0===n?void 0:n.additionalOptions)&&void 0!==r?r:[]),K(e.map((function(e){return{label:e[t],value:e[a],disabled:!!(null===n||void 0===n?void 0:n.disabledKey)&&e[n.disabledKey]}}))))};function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ee(e,t,a[t])}))}return e}var ae=function(e){var t=(0,G.useQuery)(["region-list",null===e||void 0===e?void 0:e.iso],(function(){return e?fetch(e.partial_data?"".concat("https://api.resourcewatch.org/v1","/query/Political-boundaries-Admin-1-level-GADM-36?sql=SELECT+iso%2C+name_0%2C+name_1+AS+name%2C+gid_1+AS+id+FROM+gadm36_adm1+WHERE+iso%3D'").concat(e.iso,"'+AND+ST_Contains(ST_MakeEnvelope(%27-180%27%2C+%27-50.5%27%2C+180%2C+50.5%2C+4326)%2C+the_geom)+ORDER+BY+name+ASC"):"".concat("https://api.resourcewatch.org/v1","/query/Political-boundaries-Admin-1-level-GADM-36?sql=SELECT+iso%2C+name_1+AS+name%2C+gid_1+AS+id+FROM+gadm36_adm1+WHERE+iso%3D'").concat(e.iso,"'+ORDER+BY+name+ASC")).then((function(e){return e.json()})).then((function(e){return e.data.map((function(e){return te({},e,{id:e.id.match(/[A-Z]\.(\d+)_1/)[1]})}))})):Promise.resolve([])}),{enabled:!!e});return te({},t,{data:t.data})};function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var re=function(e,t){var a=e.id,r=e.name,i=e.disabled,o=e.checked,l=e.onChange,s=e.children,c=e.className;return(0,n.jsxs)("div",{ref:t,className:["custom-control","custom-radio","c-radio"].concat(ne(c?[c]:[])).join(" "),children:[(0,n.jsx)("input",{type:"radio",className:"custom-control-input",disabled:i,id:a,name:r,checked:o,onChange:l}),(0,n.jsx)("label",{className:"custom-control-label",htmlFor:a,children:s})]})},ie=(0,r.forwardRef)(re);ie.propTypes={id:o().string.isRequired,name:o().string.isRequired,disabled:o().bool,checked:o().bool,onChange:o().func,children:o().node.isRequired,className:o().string},ie.defaultProps={disabled:!1,checked:!1,onChange:null,className:null};function oe(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var le=function(e){var t=e.id,a=e.name,r=e.disabled,i=e.checked,o=e.onChange,l=e.children,s=e.className;return(0,n.jsxs)("div",{className:["custom-control","custom-checkbox","c-checkbox"].concat(oe(s?[s]:[])).join(" "),children:[(0,n.jsx)("input",{type:"checkbox",className:"custom-control-input",disabled:r,id:t,name:a,checked:i,onChange:o}),(0,n.jsx)("label",{className:"custom-control-label",htmlFor:t,children:l})]})};le.propTypes={id:o().string.isRequired,name:o().string.isRequired,disabled:o().bool,checked:o().bool,onChange:o().func,children:o().node.isRequired,className:o().string},le.defaultProps={disabled:!1,checked:!1,onChange:null,className:null};var se=le;function ce(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var de=function(e){var t=e.id,a=e.options,i=e.defaultValue,o=e.value,l=e.onChange,s=e.disabled,c=e["aria-label"],d=e.className,u=e.required,m=(0,r.useCallback)((function(e){var t=a.find((function(t){return t.value===e.target.selectedOptions[0].value}));l(t)}),[a,l]);return(0,n.jsx)("select",{id:t,className:["c-select","custom-select"].concat(ce(d?[d]:[])).join(" "),disabled:s,"aria-label":c,defaultValue:i,value:o,onChange:m,required:u,children:a.map((function(e){return(0,n.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value)}))})};de.propTypes={id:o().string.isRequired,options:o().arrayOf(o().shape({label:o().string.isRequired,value:o().string.isRequired,disabled:o().bool})).isRequired,defaultValue:o().string,value:o().string,onChange:o().func,disabled:o().bool,"aria-label":o().string,className:o().string,required:o().bool},de.defaultProps={defaultValue:void 0,value:void 0,onChange:function(){return null},disabled:!1,"aria-label":null,className:void 0,required:!1};var ue=de;function me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var pe=function(e){var t=e.id,a=e.defaultValue,r=e.value,i=e.min,o=e.max,l=e["aria-label"],c=e.className,d=e.required,u=e.disabled,m=e.onChange;return(0,n.jsx)("input",{type:"date",id:t,className:s()("c-datepicker","form-control",me({},c,!!c)),defaultValue:a,value:r,min:i,max:o,pattern:"\\d{4}-\\d{2}-\\d{2}","aria-label":l,required:d,disabled:u,onChange:m})};pe.propTypes={id:o().string.isRequired,className:o().string,defaultValue:o().string,value:o().string,min:o().string,max:o().string,"aria-label":o().string,required:o().bool,disabled:o().bool,onChange:o().func},pe.defaultProps={className:void 0,defaultValue:void 0,value:void 0,min:void 0,max:void 0,"aria-label":void 0,required:!1,disabled:!1,onChange:function(){return null}};function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fe=function(e){var t=e.id,a=e.defaultValue,r=e.value,i=e.min,o=e.max,l=e.step,c=e["aria-label"],d=e.className,u=e.required,m=e.disabled,p=e.marks,h=e.onChange;return(0,n.jsxs)("div",{className:"c-range",children:[(0,n.jsx)("input",{type:"range",id:t,className:s()("custom-range",he({},d,!!d)),defaultValue:a,value:r,min:i,max:o,step:l,"aria-label":c,required:u,disabled:m,onChange:h}),p&&(0,n.jsx)("div",{className:"marks",children:p.map((function(e){return(0,n.jsx)("span",{"data-label":e},e)}))})]})};fe.propTypes={id:o().string.isRequired,className:o().string,defaultValue:o().string,value:o().string,min:o().string,max:o().string,step:o().string,"aria-label":o().string,required:o().bool,disabled:o().bool,marks:o().arrayOf(o().string),onChange:o().func},fe.defaultProps={className:void 0,defaultValue:void 0,value:void 0,min:void 0,max:void 0,step:void 0,"aria-label":void 0,required:!1,disabled:!1,marks:void 0,onChange:function(){return null}};function ge(e){var t=e.transparent,a=e.inner,r=e.inline,i=e.mini,o=["c-loading-spinner"];return t&&o.push("-transparent"),a&&o.push("-inner"),r&&o.push("-inline"),i&&o.push("-mini"),(0,n.jsx)("div",{className:o.join(" "),children:(0,n.jsx)("svg",{children:(0,n.jsx)("circle",{cx:i?9:30,cy:i?9:30,r:i?5:20,fill:"none",strokeWidth:i?2:3,strokeMiterlimit:"10"})})})}ge.propTypes={transparent:o().bool,inner:o().bool,inline:o().bool,mini:o().bool},ge.defaultProps={transparent:!1,inner:!1,inline:!1,mini:!1};var ve,xe,_e=ge;function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(xe=ve||(ve={})).Absolute="Absolute values",xe.Percentage="Percentage values";var ye=Object.entries(ve).map((function(e){var t=be(e,2),a=t[0];return{label:t[1],value:a}}));var we=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=L(x.rx.selectIso),a=L(x.rx.selectRegion),i=L(x.rx.selectDate),o=L(x.rx.selectUnit),l=L(x.rx.selectOneWeekAverage),s=L(x.rx.selectTwoMonthAverage),c=F(),d=Z(),u=d.isLoading,m=d.isError,p=d.data,h=X(null!==p&&void 0!==p?p:[],"name","iso"),f=null===p||void 0===p?void 0:p.find((function(e){return e.iso===t})),g=ae(f),v=g.isLoading,_=g.isError,b=g.data,y=X(null!==b&&void 0!==b?b:[],"name","id",{additionalOptions:f&&f.partial_data?void 0:[{label:"Whole country",value:""}]});return(0,r.useEffect)((function(){u||m||f||c(x.yP.updateIso(x.Uh.iso))}),[f,u,m,t,c]),(0,r.useEffect)((function(){var e;v||_||((null===b||void 0===b?void 0:b.find((function(e){return e.id===a})))||((null===f||void 0===f?void 0:f.partial_data)?c(x.yP.updateRegion(null!==(e=null===b||void 0===b?void 0:b[0].id)&&void 0!==e?e:null)):c(x.yP.updateRegion(null))))}),[b,f,v,_,a,c]),(0,n.jsxs)("form",{className:"c-tool-data-layer-settings",children:[(0,n.jsx)("h2",{children:"Location"}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{htmlFor:"data-layer-country",children:["Country ",u&&(0,n.jsx)(_e,{inline:!0,mini:!0})]}),(0,n.jsx)(ue,{id:"data-layer-country",className:m?"is-invalid":void 0,options:h,value:t,onChange:function(e){var t=e.value;return c(x.yP.updateIso(t))},disabled:u||m,required:!0,"aria-describedby":"data-layer-country-error"}),(0,n.jsx)("div",{id:"data-layer-country-error",className:"invalid-feedback",children:"Unable to load the list of countries. Please reload the page."})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{htmlFor:"data-layer-region",children:["Region ",(u||v)&&(0,n.jsx)(_e,{inline:!0,mini:!0})]}),(0,n.jsx)(ue,{id:"data-layer-region",className:_?"is-invalid":void 0,options:y,value:null!==a&&void 0!==a?a:"",onChange:function(e){var t=e.value;return c(x.yP.updateRegion(t))},disabled:u||m||v||_,required:!0,"aria-describedby":"data-layer-region-error"}),(0,n.jsx)("div",{id:"data-layer-region-error",className:"invalid-feedback",children:"Unable to load the list of regions. Please reload the page."})]}),(0,n.jsx)("h2",{children:"Time frame"}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"data-layer-date",children:"Date"}),(0,n.jsx)("input",{id:"data-layer-date",type:"date",className:"form-control",value:i,onChange:function(e){var t=e.target;return c(x.yP.updateDate(t.value))},max:(new Date).toISOString().split("T")[0],required:!0,"aria-describedby":"data-layer-date-note"}),(0,n.jsx)("div",{id:"data-layer-date-note",className:"form-text note",children:"The time frame automatically counts one year backwards from the date you select. Some recent data may be pending on availability."})]}),(0,n.jsxs)("div",{className:"form-group group-with-heading",children:[(0,n.jsx)("label",{className:"h2",htmlFor:"data-layer-value-unit",children:"Value unit"}),(0,n.jsx)(ue,{id:"data-layer-value-unit",options:ye,value:o,onChange:function(e){var t=e.value;return c(x.yP.updateUnit(t))},required:!0})]}),(0,n.jsxs)("fieldset",{className:"form-group group-with-heading",children:[(0,n.jsx)("legend",{className:"h2",children:"Data aggregation"}),(0,n.jsx)(se,{id:"data-layer-value-unit-one-week",name:"data-layer-value-unit",checked:l,onChange:function(){return c(x.yP.updateOneWeekAverage(!l))},children:"One-week moving average"}),(0,n.jsx)(se,{id:"data-layer-value-unit-two-month",name:"data-layer-value-unit",checked:s,onChange:function(){return c(x.yP.updateTwoMonthAverage(!s))},children:"Two-month moving average"})]})]})};function je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){je(e,t,a[t])}))}return e}var ke=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=L(x.rx.selectSettings),a=F(),i=(0,r.useMemo)((function(){return[{id:"value-axes",name:"Value axes",value:t.valueAxes,onChange:function(e){return a(x.yP.updateSettings(Ce({},t,{valueAxes:e})))}},{id:"time-axis",name:"Time axis",value:t.timeAxis,onChange:function(e){return a(x.yP.updateSettings(Ce({},t,{timeAxis:e})))}},{id:"time-header",name:"Chart header",value:t.header,onChange:function(e){return a(x.yP.updateSettings(Ce({},t,{header:e})))}},{id:"time-grid",name:"Chart grid",value:t.grid,onChange:function(e){return a(x.yP.updateSettings(Ce({},t,{grid:e})))}},{id:"time-legend",name:"Legend",value:t.legend,onChange:function(e){return a(x.yP.updateSettings(Ce({},t,{legend:e})))}}]}),[t,a]);return(0,n.jsx)("div",{className:"c-tool-chart-components-settings",children:i.map((function(e){return(0,n.jsx)(se,{id:"chart-component-".concat(e.id),name:"chart-component",checked:e.value,onChange:function(){return e.onChange(!e.value)},children:e.name},e.id)}))})},Ne=a(3253),Oe=a.n(Ne);function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Oe().setAppElement("#root");var Pe=function(e){var t=e.open,a=e.onClose,r=e.title,i=e.children,o=e.className;return(0,n.jsxs)(Oe(),{isOpen:t,onRequestClose:a,contentLabel:r,className:["c-modal"].concat(Se(o?[o]:[])).join(" "),children:[(0,n.jsx)("button",{type:"button",className:"btn btn-outline-primary close-button",onClick:a,children:(0,n.jsx)(w,{name:"close"})}),(0,n.jsx)("div",{className:"content",children:i})]})};Pe.propTypes={open:o().bool.isRequired,onClose:o().func.isRequired,title:o().string.isRequired,children:o().node.isRequired,className:o().string},Pe.defaultProps={className:null};var Ee=Pe,Ae=function(e){var t=e.open,a=e.onClose;return(0,n.jsxs)(Ee,{title:"Map downloaded",open:t,onClose:a,className:"c-tool-download-success-modal",children:[(0,n.jsx)("h1",{className:"mb-3",children:"Chart downloaded!"}),(0,n.jsxs)("p",{children:["Check the"," ",(0,n.jsx)("a",{href:"https://mongabay.github.io/visual-style-guide/",target:"_blank",rel:"noopener noreferrer",children:"Mongabay Style Guidelines"})," ","in case you need to add any further detail on your chart."]}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary btn-block mt-4",onClick:a,children:"Close"})]})};Ae.propTypes={open:o().bool.isRequired,onClose:o().func.isRequired};var Re=Ae,Te=function(e){var t,a=e.exporting,i=(0,r.useState)("data-layer"),o=i[0],l=i[1],s=(0,r.useState)(!1),c=s[0],d=s[1],u=(0,r.useState)(!1),m=u[0],p=u[1];return(0,r.useEffect)((function(){c!==a&&(a||p(!0),d(a))}),[a,c,p,d]),(0,n.jsxs)("aside",{className:"c-tool-sidebar",children:[(0,n.jsx)(Re,{open:m,onClose:function(){return p(!1)}}),(0,n.jsxs)(C,{multi:!1,expanded:[o],onChange:function(e){return l(null!==(t=e[0])&&void 0!==t?t:null)},children:[(0,n.jsxs)(k,{id:"data-layer",className:"data-layer"===o?"-expanded":null,children:[(0,n.jsx)(N,{"aria-level":1,children:(0,n.jsx)("span",{className:"h1",children:"Data layer"})}),(0,n.jsx)(O,{children:(0,n.jsx)(we,{})})]}),(0,n.jsxs)(k,{id:"contextual-layers",className:"contextual-layers"===o?"-expanded":null,children:[(0,n.jsx)(N,{"aria-level":1,children:(0,n.jsx)("span",{className:"h1",children:"Chart components"})}),(0,n.jsx)(O,{children:(0,n.jsx)(ke,{})})]})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(q,{sticky:"popper",plugins:[T.CA],content:(0,n.jsx)($,{}),children:(0,n.jsx)("button",{type:"button",className:"btn btn-primary mr-2",children:"Export"})})})]})};Te.propTypes={exporting:o().bool.isRequired};var qe=Te,De=(0,v.$j)((function(e){return{exporting:x.$S.selectExporting(e)}}),{})(qe),Me=a(270),Ve=a(361),ze=a.n(Ve);function Fe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Le=function(e,t,a){var n=(0,G.useQuery)(["chart-data",e,t,a],(function(){return fetch("".concat("https://us-central1-fire-water-chart.cloudfunctions.net/fire_water_chart"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({iso:t,adm1:a?+a:"",date_text:e})}).then((function(e){return e.json()}))}));return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Fe(e,t,a[t])}))}return e}({},n,{data:n.data})},Ie=JSON.parse('{"$schema":"https://vega.github.io/schema/vega/v5.json","width":430,"height":380,"autosize":{"type":"fit","contains":"padding"},"signals":[{"name":"region","value":"\u2212"},{"name":"show_value_axes","value":true},{"name":"show_time_axis","value":true},{"name":"show_header","value":true},{"name":"show_legend","value":true},{"name":"show_percentage_values","value":false},{"name":"show_one_week_average","value":true},{"name":"show_two_month_average","value":true},{"name":"base_width","value":315},{"name":"responsive_font_factor","update":"clamp(width / base_width, 0.7, 1.3)"},{"name":"tick_count","value":8},{"name":"header_height","update":"54 * responsive_font_factor"},{"name":"value_scale_factor","value":1.7}],"data":[{"name":"table","format":{"parse":{"date":"utc:\'%Y-%m-%d\'"}},"values":[],"transform":[{"type":"joinaggregate","fields":["precipitation_w","fire_w","precipitation_2m","fire_2m"],"ops":["sum","sum","sum","sum"],"as":["precipitation_w_total","fire_w_total","precipitation_2m_total","fire_2m_total"]},{"type":"formula","as":"precipitation_w","expr":"show_percentage_values ? (isValid(datum.precipitation_w) ? datum.precipitation_w / datum.precipitation_w_total : null) : datum.precipitation_w"},{"type":"formula","as":"precipitation_2m","expr":"show_percentage_values ? (isValid(datum.precipitation_2m) ? datum.precipitation_2m / datum.precipitation_2m_total : null) : datum.precipitation_2m"},{"type":"formula","as":"fire_w","expr":"show_percentage_values ? (isValid(datum.fire_w) ? datum.fire_w / datum.fire_w_total : null) : datum.fire_w"},{"type":"formula","as":"fire_2m","expr":"show_percentage_values ? (isValid(datum.fire_2m) ? datum.fire_2m / datum.fire_2m_total : null) : datum.fire_2m"}]},{"name":"stats","source":"table","transform":[{"type":"aggregate","fields":["precipitation_w","fire_w","precipitation_2m","fire_2m"],"ops":["max","max","max","max"],"as":["precipitation_w_max","fire_w_max","precipitation_2m_max","fire_2m_max"]},{"type":"formula","as":"precipitation_domain","expr":"[0, (show_one_week_average ? datum.precipitation_w_max : datum.precipitation_2m_max) * value_scale_factor]"},{"type":"formula","as":"fire_domain","expr":"[0, (show_one_week_average ? datum.fire_w_max : datum.fire_2m_max) * value_scale_factor]"},{"type":"formula","as":"precipitation_discrete_domain_step","expr":"ceil((show_one_week_average ? datum.precipitation_w_max : datum.precipitation_2m_max) / (tick_count / value_scale_factor) * (show_percentage_values ? 1000 : 1)) / (show_percentage_values ? 1000 : 1)"},{"type":"formula","as":"value_discrete_domain","expr":"reverse(sequence(0, datum.precipitation_discrete_domain_step * (tick_count + 1), datum.precipitation_discrete_domain_step))"},{"type":"formula","as":"precipitation_discrete_domain","expr":"reverse(sequence(0, datum.precipitation_discrete_domain_step * ((tick_count / value_scale_factor) + 1), datum.precipitation_discrete_domain_step))"},{"type":"formula","as":"fire_discrete_domain_step","expr":"ceil((show_one_week_average ? datum.fire_w_max : datum.fire_2m_max) / (tick_count / value_scale_factor) * (show_percentage_values ? 1000 : 1)) / (show_percentage_values ? 1000 : 1)"},{"type":"formula","as":"fire_discrete_domain","expr":"reverse(sequence(0, datum.fire_discrete_domain_step * ((tick_count / value_scale_factor) + 1), datum.fire_discrete_domain_step))"}]},{"name":"legend","values":[{"name":"Fire alerts (1-week moving average)","color":"#D9443B","opacity":1,"span":"week"},{"name":"Fire alerts (2-month moving average)","color":"#D9443B","opacity":0.2,"span":"month"},{"name":"Precipitation (1-week moving average)","color":"#5593E6","opacity":1,"span":"week"},{"name":"Precipitation (2-month moving average)","color":"#5593E6","opacity":0.2,"span":"month"}],"transform":[{"type":"formula","as":"opacity","expr":"show_one_week_average ? datum.opacity : 1"},{"type":"filter","expr":"(datum.span === \'week\' && show_one_week_average) || (datum.span === \'month\' && show_two_month_average)"}]}],"scales":[{"name":"date","type":"utc","domain":{"data":"table","field":"date"},"range":"width"},{"name":"precipitation","type":"linear","domain":{"signal":"data(\'stats\')[0].precipitation_domain"},"domainMax":{"signal":"data(\'stats\')[0].precipitation_discrete_domain_step * tick_count"},"range":"height","reverse":true},{"name":"precipitation_discrete","type":"point","domain":{"signal":"data(\'stats\')[0].precipitation_discrete_domain"},"range":{"signal":"[0, height / tick_count * ceil(tick_count / value_scale_factor)]"},"reverse":true},{"name":"fire","type":"linear","domain":{"signal":"data(\'stats\')[0].fire_domain"},"domainMax":{"signal":"data(\'stats\')[0].fire_discrete_domain_step * tick_count"},"range":"height"},{"name":"fire_discrete","type":"point","domain":{"signal":"data(\'stats\')[0].fire_discrete_domain"},"range":{"signal":"[height - height / tick_count * ceil(tick_count / value_scale_factor), height]"}},{"name":"value","type":"point","domain":{"signal":"data(\'stats\')[0].value_discrete_domain"},"range":"height","reverse":true},{"name":"legend_color","type":"ordinal","domain":{"signal":"pluck(data(\'legend\'), \'name\')"},"range":{"signal":"pluck(data(\'legend\'), \'color\')"}},{"name":"legend_opacity","type":"ordinal","domain":{"data":"legend","field":"name"},"range":{"data":"legend","field":"opacity"}}],"axes":[{"scale":"date","orient":"bottom","format":"%b"},{"scale":"value","orient":"left","labels":false},{"scale":"precipitation","orient":"left","title":"Precipitation (mm/day)","labelOpacity":0,"format":{"signal":"show_percentage_values ? \'.2%\' : null"},"grid":false},{"scale":"precipitation_discrete","orient":"left","grid":false,"format":{"signal":"show_percentage_values ? \'.2%\' : null"}},{"scale":"fire","orient":"right","title":"Fire alerts (counts)","labelOpacity":0,"format":{"signal":"show_percentage_values ? \'.2%\' : null"}},{"scale":"fire_discrete","orient":"right","format":{"signal":"show_percentage_values ? \'.2%\' : null"}}],"layout":{"align":"all","titleBand":0,"headerBand":0,"padding":0,"offset":{"columnTitle":{"signal":"(show_header ? header_height : 0) - 2"}}},"marks":[{"type":"group","role":"column-title","encode":{"enter":{"width":{"signal":"width"},"height":{"signal":"header_height"}}},"marks":[{"type":"rect","encode":{"enter":{"x":{"signal":"show_one_week_average ? 2.5 : 0.5"},"y":{"value":-2.5},"width":{"signal":"width"},"height":{"signal":"show_header ? header_height : 0"}}}},{"type":"text","encode":{"enter":{"opacity":{"signal":"show_header ? 1 : 0"},"x":{"signal":"width * 0.5 + (show_one_week_average ? 0 : -2)"},"y":{"field":{"group":"height"},"mult":0.5},"text":{"signal":"region"},"limit":{"signal":"width - 56"},"align":{"value":"center"},"fontSize":{"signal":"16 * responsive_font_factor"},"fontWeight":{"value":"700"}}}},{"type":"text","encode":{"enter":{"opacity":{"signal":"show_header ? 1 : 0"},"x":{"signal":"width * 0.5 + (show_one_week_average ? 0 : -2)"},"y":{"signal":"header_height - 10 * responsive_font_factor"},"text":{"signal":"\'Time frame: \' + timeFormat(domain(\'date\')[0], \'%Y/%m/%d\') + \' - \' + timeFormat(domain(\'date\')[1], \'%Y/%m/%d\')"},"align":{"value":"center"},"fontSize":{"signal":"10 * responsive_font_factor"}}}}]},{"type":"group","marks":[{"type":"area","from":{"data":"table"},"encode":{"enter":{"x":{"scale":"date","field":"date"},"y":{"scale":"precipitation","field":"precipitation_2m"},"y2":{"value":0},"fill":{"signal":"peek(range(\'legend_color\'))"},"defined":{"signal":"isValid(datum[\'precipitation_2m\'])"}}}},{"type":"area","from":{"data":"table"},"encode":{"enter":{"x":{"scale":"date","field":"date"},"y":{"scale":"fire","field":"fire_2m"},"y2":{"signal":"height"},"fill":{"signal":"range(\'legend_color\')[0]"},"defined":{"signal":"isValid(datum[\'fire_2m\'])"}}}},{"type":"line","from":{"data":"table"},"encode":{"enter":{"x":{"scale":"date","field":"date"},"y":{"scale":"precipitation","field":"precipitation_w"},"stroke":{"signal":"peek(range(\'legend_color\'))"},"defined":{"signal":"isValid(datum[\'precipitation_w\'])"}}}},{"type":"line","from":{"data":"table"},"encode":{"enter":{"x":{"scale":"date","field":"date"},"y":{"scale":"fire","field":"fire_w"},"stroke":{"signal":"range(\'legend_color\')[0]"},"defined":{"signal":"isValid(datum[\'fire_w\'])"}}}}]}],"config":{"background":"#ffffff","padding":{"signal":"show_legend ? { \'bottom\': show_one_week_average && show_two_month_average ? 60 : (20 + 15 * responsive_font_factor) } : {}"},"axis":{"grid":true,"gridDash":[2,2],"gridColor":"#CDCDCD","gridWidth":0.5,"ticks":false,"domainColor":"#CDCDCD","titleFont":"Open Sans","titleFontSize":{"signal":"10 * responsive_font_factor"},"titleFontWeight":"400","titlePadding":{"signal":"12 * responsive_font_factor"},"labelColor":"#222222","labelFont":"Open Sans","labelFontSize":{"signal":"10 * responsive_font_factor"},"labelOverlap":"parity","labelPadding":{"signal":"10 * responsive_font_factor"}},"axisY":{"titleFontSize":{"signal":"show_value_axes ? 10 * responsive_font_factor : 0"},"titlePadding":{"signal":"show_value_axes ? 12 * responsive_font_factor : 0"},"labelPadding":{"signal":"6 * responsive_font_factor"}},"axisRight":{"grid":false,"titlePadding":{"signal":"show_value_axes ? 25 * responsive_font_factor : 0"},"titleAngle":-90},"legend":{"legendX":{"signal":"(show_value_axes ? -45 : 5) + (width < base_width ? 15 : 5)"},"legendY":{"signal":"height + 20 + (show_time_axis ? 20 * responsive_font_factor : 0)"},"padding":2,"labelLimit":{"signal":"(width + 100 * responsive_font_factor) / 2 - (28 * responsive_font_factor) / 2"},"columns":2,"columnPadding":{"signal":"10 * responsive_font_factor"},"rowPadding":{"signal":"8 * responsive_font_factor"},"labelColor":"#222222","labelFont":"Open Sans","labelFontSize":{"signal":"show_value_axes ? 10 * responsive_font_factor : min(10 * responsive_font_factor, 10)"}},"rect":{"stroke":"#CDCDCD","strokeWidth":1,"strokeOpacity":1,"fill":"none"},"text":{"font":"Open Sans","fill":"#222"},"area":{"fillOpacity":{"signal":"show_one_week_average ? 0.2 : 1"}},"line":{"strokeWidth":2}},"legends":[{"orient":"none","fill":"legend_color","opacity":"legend_opacity"}]}'),Be=function(e,t,a,n,r,i,o){var l,s,c,d,u=function(e,t){var a,n=ae(e);if(!e||null!==t&&(n.isError||n.isError))return null;var r=null!==t?null===(a=n.data)||void 0===a?void 0:a.find((function(e){return e.id===t})):null;return t&&!r?null:t?"".concat(null===r||void 0===r?void 0:r.name,", ").concat(e.name):e.name}(null!==(s=null===(l=Z().data)||void 0===l?void 0:l.find((function(t){return t.iso===e})))&&void 0!==s?s:null,t),m=Le(a,e,null!==t&&void 0!==t?t:void 0),p=!u||m.isLoading,h=m.isError;p||h||((c=ze()(Ie)).signals[0].value=u,c.data[0].values=null!==(d=ze()(m.data))&&void 0!==d?d:[],"Percentage"===n&&(c.signals[5].value=!0),r||(c.signals[6].value=!1,c.marks[1].marks=c.marks[1].marks.filter((function(e){return"line"!==e.type}))),i||(c.signals[7].value=!1,c.marks[1].marks=c.marks[1].marks.filter((function(e){return"area"!==e.type}))),o.valueAxes||(c.signals[1].value=!1,c.config.axisY.labels=!1),o.timeAxis||(c.signals[2].value=!1,c.config.axisBottom={labels:!1}),o.header||(c.signals[3].value=!1),o.grid||(c.config.axis.grid=!1),o.legend||(c.signals[4].value=!1));return{isLoading:p,isError:h,data:c}};var We=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=L(x.rx.selectIso),a=L(x.rx.selectRegion),i=L(x.rx.selectDate),o=L(x.rx.selectUnit),l=L(x.rx.selectOneWeekAverage),s=L(x.rx.selectTwoMonthAverage),c=L(x.rx.selectSettings),d=(0,r.useRef)(null),u=Be(t,a,i,o,l,s,c);return(0,r.useEffect)((function(){if(d.current&&!u.isLoading&&!u.isError&&u.data){var e=(0,Me.Qc3)(u.data),t=new Me.G7x(e,{container:".js-chart-container"}),a=d.current.getBoundingClientRect(),n=a.width,r=a.height;return t.width(n-2),t.height(r-2),t.runAsync(),function(){t.finalize()}}}),[u]),(0,n.jsxs)("div",{ref:d,className:"c-tool-chart",children:[!u.isLoading&&!u.isError&&(0,n.jsx)("div",{className:"js-chart-container"}),u.isLoading&&(0,n.jsx)(_e,{inner:!0,transparent:!0}),u.isError&&(0,n.jsx)("p",{className:"text-center",children:"Unable to load the data. Please retry in a few minutes or with different settings."})]})},He=a(4155);var Ue=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t,a=L(x.$S.selectExporting);return(0,n.jsxs)("div",{className:"c-tool-attributions",children:[a&&(0,n.jsx)("img",{src:"".concat(null!==(t=He.env.BASE_PATH)&&void 0!==t?t:"","/images/mongabay-horizontal.jpg"),alt:"Mongabay",width:135,height:20}),!a&&(0,n.jsx)("div",{}),(0,n.jsxs)("div",{className:"content",children:["Data from"," ",(0,n.jsx)("a",{href:"https://globalforestwatch.org/",rel:"noopener noreferrer",target:"_blank",children:"Global Forest Watch"})," ","(NASA FIRMS. \u201c",(0,n.jsx)("a",{href:"https://earthdata.nasa.gov/earth-observation-data/near-real-time/firms/v1-vnp14imgt",rel:"noopener noreferrer",target:"_blank",children:"VIIRS Active Fires"}),".\u201d) and the"," ",(0,n.jsx)("a",{href:"https://chc.ucsb.edu/",rel:"noopener noreferrer",target:"_blank",children:"Climate Hazards Center"})," ","(",(0,n.jsx)("a",{href:"https://chc.ucsb.edu/data/chirps",rel:"noopener noreferrer",target:"_blank",children:"CHIRPS Rainfall Estimates"}),") ."]})]})},Ye=function(){var e=L(x.$S.selectWidth),t=L(x.$S.selectHeight),a=L(x.$S.selectExporting);return(0,n.jsxs)("div",{className:s()(["c-tool-visualization","".concat(a?"exporting":"")]),children:[a&&(0,n.jsx)("div",{className:"exporting-message",children:"Exporting..."}),(0,n.jsxs)("div",{className:"m-auto d-flex flex-column js-visualization",style:{width:"".concat(e,"px"),minWidth:"".concat(e,"px"),height:"".concat(t,"px")},children:[(0,n.jsx)("div",{className:"chart-container",children:(0,n.jsx)(We,{})}),(0,n.jsx)(Ue,{})]})]})},$e=function(e){var t=e.serializedState,a=e.restoreState,i=(0,r.useState)(!1),o=(i[0],i[1]);return(0,r.useEffect)((function(){a()}),[a]),(0,r.useEffect)((function(){_.Router.replaceRoute("home",{state:t})}),[t]),(0,r.useEffect)((function(){o(!1)}),[]),(0,n.jsxs)("div",{className:"c-tool",children:[(0,n.jsx)(De,{}),(0,n.jsx)(Ye,{})]})};$e.propTypes={serializedState:o().string.isRequired,restoreState:o().func.isRequired};var Ge=$e,Qe=(0,v.$j)((function(e){return{serializedState:x.jG.selectSerializedState(e)}}),{restoreState:x.Iy.restoreState})(Ge),Je=function(){return(0,n.jsx)(g,{className:"p-home",children:(0,n.jsx)(Qe,{})})}}}]);